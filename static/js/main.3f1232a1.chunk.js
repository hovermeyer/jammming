(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,function(e,t,a){e.exports=a(15)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),i=a(2),n=a.n(i);a(8),a(9);class o extends r.a.Component{constructor(e){super(e),this.state={},this.search=this.search.bind(this),this.handleTermChange=this.handleTermChange.bind(this),this.keyPress=this.keyPress.bind(this)}search(){this.props.onSearch(this.state.term)}handleTermChange(e){let t=e.target.value;this.setState({term:t})}keyPress(e){13===e.keyCode&&this.search()}render(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("input",{onChange:this.handleTermChange,onKeyDown:this.keyPress,placeholder:"Enter A Song, Album, or Artist"}),r.a.createElement("a",{onClick:this.search},"SEARCH"))}}var c=o;a(10);class h extends r.a.Component{constructor(e){super(e),this.addTrack=this.addTrack.bind(this),this.removeTrack=this.removeTrack.bind(this)}renderAction(){return this.props.isRemoval?r.a.createElement("a",{onClick:this.removeTrack,className:"Track-action"},"-"):r.a.createElement("a",{onClick:this.addTrack,className:"Track-action"},"+")}addTrack(){this.props.onAdd(this.props.track)}removeTrack(){this.props.onRemove(this.props.track)}convertTime(){return new Date(this.props.track.duration).toISOString().slice(14,-5)}render(){return r.a.createElement("div",{className:"Track"},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h3",null,this.props.track.name),r.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album," | ",this.convertTime())),this.renderAction())}}var l=h;a(11);class m extends r.a.Component{render(){return r.a.createElement("div",{className:"TrackList"},this.props.tracks.map(e=>r.a.createElement(l,{onAdd:this.props.onAdd,track:e,key:e.id,duration:e.duration,link:e.link,onRemove:this.props.onRemove,isRemoval:this.props.isRemoval})))}}m.defaultProps={tracks:[]};var d=m;a(12);class p extends r.a.Component{render(){return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",null,"Results"),r.a.createElement(d,{isRemoval:!1,onAdd:this.props.onAdd,tracks:this.props.searchResults}))}}var u=p;a(13);class k extends r.a.Component{constructor(e){super(e),this.handleNameChange=this.handleNameChange.bind(this)}handleNameChange(e){const t=e.target.value;this.props.onNameChange(t)}render(){return r.a.createElement("div",{className:"Playlist"},r.a.createElement("input",{onChange:this.handleNameChange,value:this.props.playlistName}),r.a.createElement(d,{onRemove:this.props.onRemove,isRemoval:!0,tracks:this.props.playlistTracks}),r.a.createElement("a",{onClick:this.props.onSave,className:"Playlist-save"},"SAVE TO SPOTIFY"),r.a.createElement("a",{onClick:this.props.onSearch,className:"Playlist-search"},"SEARCH RELATED"))}}var y=k;let v="",T={getAccessToken:()=>{let e=window.location.href;if(v)return v;if(e.match(/access_token=([^&]*)/)&&e.match(/expires_in=([^&]*)/)){let t=e.match(/expires_in=([^&]*)/)[1];return v=window.location.href.match(/access_token=([^&]*)/)[1],window.setTimeout(()=>v="",1e3*t),window.history.pushState("Access Token",null,"/"),v}window.location="https://accounts.spotify.com/authorize?client_id=".concat("e7089f671bcf466cadac8945320843cb","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://hovermeyer.github.io/jammming/")},search:e=>fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(T.getAccessToken())}}).then(e=>e.json()).then(e=>{if(e.tracks)return e.tracks.items.map(e=>({id:e.id,artist:e.artists[0].name,album:e.album.name,name:e.name,URI:e.uri,duration:e.duration_ms,link:e.href}))}),recommedations:e=>fetch("https://api.spotify.com/v1/recommendations?".concat(e),{headers:{Authorization:"Bearer ".concat(T.getAccessToken())}}).then(e=>e.json()).then(e=>{if(e.tracks)return e.tracks.map(e=>({id:e.id,artist:e.artists[0].name,album:e.album.name,name:e.name,URI:e.uri,duration:e.duration_ms,link:e.href}))}),savePlaylist:(e,t)=>{if(e&&t.length){let a,s,r={Authorization:"Bearer ".concat(v)};fetch("https://api.spotify.com/v1/me",{headers:r}).then(e=>{if(e.ok)return e.json();throw new Error("Network Error")},e=>{console.log(e.message)}).then(e=>{e.id&&(a=e.id)}).then(t=>fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{method:"POST",headers:r,body:JSON.stringify({name:e})}).then(e=>{if(e.ok)return e.json();throw new Error("Network Error")}),e=>{console.log(e.message)}).then(e=>{e.id&&(s=e.id)}).then(e=>fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(s,"/tracks"),{method:"POST",headers:r,body:JSON.stringify({uris:t})}).then(e=>e.json()))}}};var f=T;a(14);class E extends r.a.Component{constructor(e){super(e),this.state={searchResults:[],playlistName:"My Playlist Name Test",playlistTracks:[]},this.addTrack=this.addTrack.bind(this),this.removeTrack=this.removeTrack.bind(this),this.updatePlaylistName=this.updatePlaylistName.bind(this),this.savePlaylist=this.savePlaylist.bind(this),this.search=this.search.bind(this),this.recommendations=this.recommendations.bind(this)}addTrack(e){this.state.playlistTracks.find(t=>t.id===e.id)||(this.state.playlistTracks.push(e),this.setState({playlistTracks:this.state.playlistTracks}))}updatePlaylistName(e){this.setState({playlistName:e})}removeTrack(e){let t=this.state.playlistTracks.filter(t=>t.id!==e.id);this.setState({playlistTracks:t})}savePlaylist(){let e=this.state.playlistTracks.map(e=>e.URI);f.savePlaylist(this.state.playlistName,e)}search(e){f.search(e).then(e=>{this.setState({searchResults:e})})}recommendations(){let e=this.state.playlistTracks.map(e=>e.id).slice(0,5).join(","),t="seed_tracks=".concat(e);f.recommedations(t).then(e=>{this.setState({searchResults:e})})}render(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Ja",r.a.createElement("span",{className:"highlight"},"mmm"),"ing"),r.a.createElement("div",{className:"App"},r.a.createElement(c,{onSearch:this.search}),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(u,{onAdd:this.addTrack,searchResults:this.state.searchResults}),r.a.createElement(y,{onNameChange:this.updatePlaylistName,onRemove:this.removeTrack,onSave:this.savePlaylist,onSearch:this.recommendations,playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks}))))}}var g=E;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[3,1,2]]]);
//# sourceMappingURL=main.3f1232a1.chunk.js.map