(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],{28:function(e,t,a){e.exports=a(45)},33:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),r=a(12),n=a.n(r),l=(a(33),a(34),a(62)),c=a(46),o=a(61);class h extends i.a.Component{constructor(e){super(e),this.handleSearchChange=(e,t)=>{this.setState({durationRange:t})},this.state={durationRange:[0,1e4]},this.search=this.search.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.handleTermChange=this.handleTermChange.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.keyPress=this.keyPress.bind(this)}search(){this.props.onSearch(this.state.term)}handleTermChange(e){let t=e.target.value;this.setState({term:t})}keyPress(e){13===e.keyCode&&this.search()}advancedSearch(){this.props.onAdvancedSearch()}renderAdvanced(){return this.props.advancedSearchVisible?i.a.createElement("div",null,i.a.createElement(c.a,{onClick:this.advancedSearch}," Regular Search"),i.a.createElement(l.a,{value:this.state.durationRange,onChange:this.handleSearchChange,valueLabelDisplay:"auto","aria-labelledby":"range-slider"})):i.a.createElement(c.a,{onClick:this.advancedSearch}," More Options")}render(){return i.a.createElement("div",{className:"SearchBar"},i.a.createElement("input",{onChange:this.handleTermChange,onKeyDown:this.keyPress,placeholder:"Enter A Song, Album, or Artist"}),i.a.createElement(o.a,{size:"large",variant:"contained",color:"primary","aria-label":"contained primary button group"},i.a.createElement(c.a,{onClick:this.search},"Search")))}}var d=h;a(38);class m extends i.a.Component{constructor(e){super(e),this.addTrack=this.addTrack.bind(this),this.removeTrack=this.removeTrack.bind(this)}renderAction(){return this.props.isRemoval?i.a.createElement("a",{onClick:this.removeTrack,className:"Track-action"},"-"):i.a.createElement("a",{onClick:this.addTrack,className:"Track-action"},"+")}addTrack(){this.props.onAdd(this.props.track)}removeTrack(){this.props.onRemove(this.props.track)}convertTime(){return new Date(this.props.track.duration).toISOString().slice(14,-5)}render(){return i.a.createElement("div",{className:"Track"},i.a.createElement("div",{className:"Track-information"},i.a.createElement("h3",null,this.props.track.name),i.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album," | ",this.convertTime())),this.renderAction())}}var p=m;a(39);class u extends i.a.Component{render(){return i.a.createElement("div",{className:"TrackList"},this.props.tracks.map(e=>i.a.createElement(p,{onAdd:this.props.onAdd,track:e,key:e.id,duration:e.duration,link:e.link,onRemove:this.props.onRemove,isRemoval:this.props.isRemoval})))}}u.defaultProps={tracks:[]};var y=u;a(40);class k extends i.a.Component{render(){return i.a.createElement("div",{className:"SearchResults"},i.a.createElement("h2",null,"Results"),i.a.createElement(y,{isRemoval:!1,onAdd:this.props.onAdd,tracks:this.props.searchResults}))}}var v=k;a(41);class g extends i.a.Component{constructor(e){super(e),this.handleNameChange=this.handleNameChange.bind(this)}handleNameChange(e){const t=e.target.value;this.props.onNameChange(t)}render(){return i.a.createElement("div",{className:"Playlist"},i.a.createElement("input",{onChange:this.handleNameChange,value:this.props.playlistName}),i.a.createElement(y,{onRemove:this.props.onRemove,isRemoval:!0,tracks:this.props.playlistTracks}),i.a.createElement("a",{onClick:this.props.onSave,className:"Playlist-save"},"SAVE TO SPOTIFY"),i.a.createElement("a",{onClick:this.props.onSearch,className:"Playlist-search"},"SEARCH RELATED"))}}var T=g;a(42);class E extends i.a.Component{constructor(e){super(e),this.loadPlaylist=this.loadPlaylist.bind(this)}loadPlaylist(){this.props.loadPlaylist(this.props.playlist)}render(){return i.a.createElement("div",{className:"Playlist"},i.a.createElement("div",{className:"Playlist-information"},i.a.createElement("h3",null,this.props.playlist.name),i.a.createElement("p",null,this.props.playlist.totalTracks," Tracks")),i.a.createElement("a",{onClick:this.loadPlaylist,className:"Playlist-action"},"Load"))}}var S=E;a(43);class f extends i.a.Component{constructor(e){super(e)}render(){return i.a.createElement("div",{className:"PlaylistList"},i.a.createElement("h2",null,"My Playlists"),this.props.playlists.map(e=>i.a.createElement(S,{className:"Playlist",playlist:e,key:e.id,loadPlaylist:this.props.loadPlaylist})))}}f.defaultProps={playlists:[]};var P=f;let b="",N={getAccessToken:()=>{let e=window.location.href;if(b)return b;if(e.match(/access_token=([^&]*)/)&&e.match(/expires_in=([^&]*)/)){let t=e.match(/expires_in=([^&]*)/)[1];return b=window.location.href.match(/access_token=([^&]*)/)[1],window.setTimeout(()=>b="",1e3*t),window.history.pushState("Access Token",null,"/"),b}window.location="https://accounts.spotify.com/authorize?client_id=".concat("e7089f671bcf466cadac8945320843cb","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://hovermeyer.github.io/jammming/")},search:e=>fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(N.getAccessToken())}}).then(e=>e.json()).then(e=>{if(e.tracks)return e.tracks.items.map(e=>({id:e.id,artist:e.artists[0].name,album:e.album.name,name:e.name,URI:e.uri,duration:e.duration_ms,link:e.href}))}),getPlaylists:()=>fetch("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(N.getAccessToken())}}).then(e=>e.json()).then(e=>{if(e.items)return e.items.map(e=>({id:e.id,name:e.name,totalTracks:e.tracks.total,URI:e.uri}))}),loadPlaylist:e=>fetch(" https://api.spotify.com/v1/playlists/".concat(e),{headers:{Authorization:"Bearer ".concat(N.getAccessToken())}}).then(e=>e.json()).then(e=>{if(console.log(e),e.tracks)return e.tracks.items.map(e=>({id:e.track.id,artist:e.track.artists[0].name,album:e.track.album.name,name:e.track.name,URI:e.track.uri,duration:e.track.duration_ms,link:e.track.href}))}),recommedations:e=>fetch("https://api.spotify.com/v1/recommendations?".concat(e),{headers:{Authorization:"Bearer ".concat(N.getAccessToken())}}).then(e=>e.json()).then(e=>{if(e.tracks)return e.tracks.map(e=>({id:e.id,artist:e.artists[0].name,album:e.album.name,name:e.name,URI:e.uri,duration:e.duration_ms,link:e.href}))}),savePlaylist:(e,t)=>{if(e&&t.length){let a,s,i={Authorization:"Bearer ".concat(b)};fetch("https://api.spotify.com/v1/me",{headers:i}).then(e=>{if(e.ok)return e.json();throw new Error("Network Error")},e=>{console.log(e.message)}).then(e=>{e.id&&(a=e.id)}).then(t=>fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{method:"POST",headers:i,body:JSON.stringify({name:e})}).then(e=>{if(e.ok)return e.json();throw new Error("Network Error")}),e=>{console.log(e.message)}).then(e=>{e.id&&(s=e.id)}).then(e=>fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(s,"/tracks"),{method:"POST",headers:i,body:JSON.stringify({uris:t})}).then(e=>e.json()))}}};var C=N;a(44);class A extends i.a.Component{constructor(e){super(e),this.state={searchResults:[],playlistName:"My Playlist Name Test",playlistTracks:[],playlists:this.getPlaylists(),advancedSearchVisible:!1},this.addTrack=this.addTrack.bind(this),this.removeTrack=this.removeTrack.bind(this),this.updatePlaylistName=this.updatePlaylistName.bind(this),this.savePlaylist=this.savePlaylist.bind(this),this.search=this.search.bind(this),this.recommendations=this.recommendations.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getPlaylists=this.getPlaylists.bind(this),this.loadPlaylist=this.loadPlaylist.bind(this)}addTrack(e){this.state.playlistTracks.find(t=>t.id===e.id)||(this.state.playlistTracks.push(e),this.setState({playlistTracks:this.state.playlistTracks}))}updatePlaylistName(e){this.setState({playlistName:e})}removeTrack(e){let t=this.state.playlistTracks.filter(t=>t.id!==e.id);this.setState({playlistTracks:t})}savePlaylist(){let e=this.state.playlistTracks.map(e=>e.URI);C.savePlaylist(this.state.playlistName,e)}search(e){C.search(e).then(e=>{this.setState({searchResults:e})})}advancedSearch(){let e=!this.state.advancedSearchVisible;this.setState({advancedSearchVisible:e})}getPlaylists(){C.getPlaylists().then(e=>{this.setState({playlists:e})})}loadPlaylist(e){C.loadPlaylist(e.id).then(t=>{this.setState({playlistTracks:t,playlistName:e.name})})}recommendations(){let e=this.state.playlistTracks.map(e=>e.id).slice(0,5).join(","),t="seed_tracks=".concat(e);C.recommedations(t).then(e=>{this.setState({searchResults:e})})}render(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Ja",i.a.createElement("span",{className:"highlight"},"mmm"),"ing"),i.a.createElement("div",{className:"App"},i.a.createElement(d,{onSearch:this.search,onAdvancedSearch:this.advancedSearch,advancedSearchVisible:this.state.advancedSearchVisible}),i.a.createElement("div",{className:"App-playlist"},i.a.createElement(P,{playlists:this.state.playlists,loadPlaylist:this.loadPlaylist}),i.a.createElement(v,{onAdd:this.addTrack,searchResults:this.state.searchResults}),i.a.createElement(T,{onNameChange:this.updatePlaylistName,onRemove:this.removeTrack,onSave:this.savePlaylist,onSearch:this.recommendations,playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks})),i.a.createElement("div",{className:"App-playlist"})))}}var R=A;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.c6909ce8.chunk.js.map